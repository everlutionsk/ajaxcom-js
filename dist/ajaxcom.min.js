!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ajaxcom=t():e.ajaxcom=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function r(e){return o(this,void 0,void 0,function(){var t,n;return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),[4,e.beforeSend()];case 1:return r.sent(),[4,i.fetchOperations(e)];case 2:return t=r.sent(),[4,e.success()];case 3:return r.sent(),[4,i.handleOperations(t)];case 4:return r.sent(),e.complete(),[3,6];case 5:return n=r.sent(),e.error(),[3,6];case 6:return[2]}})})}var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function c(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,c)}u((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,a=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,c,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);t.request=r},function(e,t,n){"use strict";function r(e){var t=a({beforeSend:function(){return Promise.resolve()},complete:function(){},error:o,formsSelector:"form",linksSelector:"a:not([target=_blank])",success:function(){return Promise.resolve()}},e);document.addEventListener("click",i.toHandleClick(t)),document.addEventListener("submit",c.toHandleSubmit(t)),window.onpopstate=function(e){"object"==typeof e.state&&null!==e.state||window.location.reload(),window.location.href=e.state.url}}function o(){alert("Server cannot handle your request. Please try it again or contact the administrator.")}var a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),c=n(7);t.ajaxcom=r},function(e,t,n){"use strict";function r(e){return function(t){if(t.srcElement.matches(e.linksSelector)&&!o(t)){t.preventDefault();var n=t.srcElement,r=l({},e,{method:"GET",url:n.href});f.request(r)}}}function o(e){return a(e)||[i,c,u,s].some(function(t){return t(e.srcElement)})}function a(e){return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey}function i(e){return"A"!==e.tagName.toUpperCase()}function c(e){return e.hostname!==location.hostname||e.protocol!==location.protocol}function u(e){return e.hash&&e.href.replace(e.hash,"")===location.href.replace(location.hash,"")}function s(e){return e.href===location.href+"#"}var l=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(t,"__esModule",{value:!0});var f=n(0);t.toHandleClick=r},function(e,t,n){"use strict";function r(e){return fetch(e.url,{body:e.body,cache:"no-store",credentials:"include",headers:new Headers({"X-AjaxCom":"true",Accept:"application/json"}),method:e.method})}function o(e){return e.json().then(function(e){e.forEach(function(e){return a(e)})})}function a(e){var t=e.operation,n=e.options;switch(t){case"container":u.handleContainer(n);break;case"changeurl":c.handleChangeUrl(n);break;case"callback":i.handleCallback(n);break;default:throw new Error("Operation "+t+" is not supported")}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),c=n(5),u=n(6);t.fetchOperations=r,t.handleOperations=o},function(e,t,n){"use strict";function r(e){var t=e.callFunction.split("."),n=window;t.forEach(function(e){n=n[e]}),"function"==typeof n&&n(e.params)}Object.defineProperty(t,"__esModule",{value:!0}),t.handleCallback=r},function(e,t,n){"use strict";function r(e){var t;switch(e.method){case"push":t=o(e);break;case"replace":t=a(e);break;case"redirect":t=i(e);break;default:throw new Error("ChangeUrl method "+e.method+" is not supported")}setTimeout(t,e.wait)}function o(e){var t=window.location.href+window.location.search,n=window.location.pathname+window.location.search;t!==e.url&&n!==e.url&&history.pushState(e,null,e.url)}function a(e){history.replaceState(e,null,e.url)}function i(e){window.location.href=e.url}Object.defineProperty(t,"__esModule",{value:!0}),t.handleChangeUrl=r},function(e,t,n){"use strict";function r(e){var t=document.querySelectorAll(e.target);if(null!==t)switch(e.method){case"html":!function(){a(t,function(t,n){n.innerHTML=e.value})}();break;case"remove":!function(){a(t,function(e,t){t.remove()})}();break;case"append":!function(){a(t,function(t,n){n.appendChild(o(e.value))})}();break;case"prepend":!function(){a(t,function(t,n){n.insertBefore(o(e.value),n.firstChild)})}();break;case"replace":!function(){a(t,function(t,n){n.outerHTML=e.value})}();break;case"addClass":!function(){a(t,function(t,n){n.classList.add(e.value)})}();break;case"removeClass":!function(){a(t,function(t,n){n.classList.remove(e.value)})}();break;case"attr":!function(){a(t,function(t,n){n.setAttribute(e.attr,e.value)})}();break;default:throw new Error("Container method "+e.method+" is not supported")}}function o(e){return(new DOMParser).parseFromString(e,"text/html")}function a(e,t){for(var n=0;n<e.length;n++)t.call(this,n,e[n])}Object.defineProperty(t,"__esModule",{value:!0}),t.handleContainer=r},function(e,t,n){"use strict";function r(e){return function(t){var n=t.target;if(!1!==n.matches(e.formsSelector)&&"FORM"===n.tagName.toUpperCase()){t.preventDefault();var r=new FormData(n),c=i({},e,{method:n.method,url:n.action});s.request("GET"===n.method.toUpperCase()?a(r,c):o(r,c))}}}function o(e,t){return i({},t,{body:e})}function a(e,t){var n=u(e.entries()).map(function(e){return encodeURIComponent(e[0])+"="+e[1]}).join("&"),r=-1===t.url.indexOf("?")?"?":"&";return i({},t,{url:[t.url,r,n].join()})}var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},u=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0);t.toHandleSubmit=r}])});